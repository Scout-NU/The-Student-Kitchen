<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Impact - The Student Kitchen</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800;900&family=New+Spirit:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="custom-cursor">üç¥</div>
    <div id="header"></div>

    <main>
        <section class="impact">
            <div class="container">
                <h1>Community Impact</h1>
                <p class="section-description">Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat.</p>
            </div>
        </section>
        
        <section class="carousel-section">
            <div class="carousel">
                <button class="arrow prev" aria-label="Previous">‚Äπ</button>
                <div class="carousel-wrapper">
                    <div class="carousel-track">
                        <div class="card">
                            <img src="assets/students.png" alt="Students in kitchen" />
                        </div>
                        <div class="card">
                            <img src="assets/students2.png" alt="Student cooking" />
                        </div>
                        <div class="card">
                            <img src="assets/students3.png" alt="Student working" />
                        </div>
                        <div class="card">
                            <img src="assets/students4.png" alt="Students in kitchen" />
                        </div>
                        <div class="card">
                            <img src="assets/ben.png" alt="Student cooking" />
                        </div>
                        <div class="card">
                            <img src="assets/image5.png" alt="Student working" />
                        </div>
                    </div>
                </div>
                <button class="arrow next" aria-label="Next">‚Ä∫</button>
            </div>
        </section>
        
 <section class="statistics-section">
    <div class="statistics-container">
        <div class="stat-item">
            <div class="stat-icon-wrapper">
                <img src="assets/people-icon.png" alt="People Icon" class="header-logo">
            </div>
            <p class="stat-text">Statistic 1</p>
        </div>
        <div class="stat-item">
            <div class="stat-icon-wrapper">
                <img src="assets/building-icon.png" alt="Building Icon" class="header-logo">
            </div>
            <p class="stat-text">Statistic 2</p>
        </div>
        <div class="stat-item">
            <div class="stat-icon-wrapper pie-chart-wrapper">
                <img src="assets/pie-chart-icon-1.png" alt="Pie Chart Icon" class="pie-chart-icon-1">
                <img src="assets/pie-chart-icon-2.png" alt="Pie Chart Icon" class="pie-chart-icon-2">
            </div>
            <p class="stat-text">Statistic 3</p>
        </div>
    </div>
</section>

        <section class="partners">
            <div class="container">
                <h1>Community Partners</h1>
                <p class="section-description">Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat.</p>
                
                <div class="map-container">
                    <img src="assets/newyorkmap.png" alt="Map of New York" class="map" />
                    
                    <div class="map-popup">
                        <button class="close" aria-label="Close">√ó</button>
                        <div class="popup-content">
                            <div class="popup-icon">
                                <img src="assets/partner-icon.png" alt="Partner logo" />
                            </div>
                            <h3>Plaza Proletaria</h3>
                            <p>Through El Puente and NYC Department of Youth and Community Development, The Student Kitchen leads a weekly drop-in cooking class for high school students. Students practice following recipes, learn about seasonal produce, and gain confidence in the kitchen.</p>
                            <button class="site-btn">Site</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="partner-logos-section">
            <div class="partner-logos-carousel">
                <div class="logos-track">
                    <img src="assets/logos1.png" alt="Partner logos row 1" />
                    <img src="assets/logo2.png" alt="Partner logos row 2" />
                    <img src="assets/logo3.png" alt="Partner logos row 3" />
                    <img src="assets/logos1.png" alt="Partner logos row 1" />
                    <img src="assets/logo2.png" alt="Partner logos row 2" />
                    <img src="assets/logo3.png" alt="Partner logos row 3" />
                </div>
            </div>
        </section>
    </main>

    <div id="footer"></div>

    <script>
        fetch('header.html')
            .then(response => response.text())
            .then(data => document.getElementById('header').innerHTML = data);
        
        fetch('footer.html')
            .then(response => response.text())
            .then(data => document.getElementById('footer').innerHTML = data);
    </script>
    <script src="cursor.js"></script>
    <script>
        // Infinite Loop Carousel - Based on reference design
        const carousel = document.querySelector('.carousel');
        const track = document.querySelector('.carousel-track');
        const prevButton = document.querySelector('.arrow.prev');
        const nextButton = document.querySelector('.arrow.next');
        
        // Get original slides
        const originalSlides = Array.from(track.querySelectorAll('.card'));
        const totalSlides = originalSlides.length;
        
        if (totalSlides === 0) {
            console.error('No slides found in carousel');
        } else {
            // Wait for images to load and get actual dimensions
            const firstCard = originalSlides[0];
            const cardHeight = firstCard.offsetHeight || 550; // fallback to CSS height (34.375rem)
            
            // Set up track container for absolute positioning
            track.style.position = 'relative';
            track.style.width = '100%';
            track.style.height = cardHeight + 'px';
            track.style.display = 'block';
            track.style.minHeight = cardHeight + 'px';
            
            // Set up cards with absolute positioning (like reference)
            originalSlides.forEach((card, index) => {
                // Use a larger percentage of container width for more horizontal space
                const carouselWidth = carousel.offsetWidth || window.innerWidth;
                const cardWidth = Math.min(carouselWidth * 0.75, 800); // 75% of container, max 800px
                
                card.style.position = 'absolute';
                card.style.width = cardWidth + 'px';
                card.style.height = cardHeight + 'px';
                card.style.left = '50%';
                card.style.top = '0';
                card.style.marginLeft = (-cardWidth / 2) + 'px';
                card.style.transition = 'transform .4s ease, opacity .4s ease';
                card.style.cursor = 'pointer';
                card.style.opacity = '1'; // Make sure cards are visible initially
                card.dataset.index = index;
            });
            
            // Track current position (0 to totalSlides-1)
            let currentIndex = 0;
            let isTransitioning = false;
            
            // Update carousel positions based on current index
            function updateCarousel() {
                originalSlides.forEach((card, index) => {
                    // Calculate relative position: how many slides away from current
                    let relativePosition = index - currentIndex;
                    
                    // Handle wrapping for infinite loop
                    if (relativePosition > totalSlides / 2) {
                        relativePosition -= totalSlides;
                    } else if (relativePosition < -totalSlides / 2) {
                        relativePosition += totalSlides;
                    }
                    
                    if (relativePosition === 0) {
                        // Current slide - center, full size
                        card.style.transform = 'translateX(0) scale(1)';
                        card.style.opacity = '1';
                        card.style.zIndex = '1';
                    } else if (relativePosition === 1) {
                        // Next slide - right side
                        card.style.transform = 'translateX(40%) scale(0.8)';
                        card.style.opacity = '0.4';
                        card.style.zIndex = '0';
                    } else if (relativePosition === -1) {
                        // Previous slide - left side
                        card.style.transform = 'translateX(-40%) scale(0.8)';
                        card.style.opacity = '0.4';
                        card.style.zIndex = '0';
                    } else {
                        // Other slides - hidden
                        card.style.opacity = '0';
                        card.style.zIndex = '0';
                    }
                });
            }
            
            // Move to next slide (infinite loop)
            function moveNext() {
                if (isTransitioning) return;
                isTransitioning = true;
                
                // Increment with modulo for infinite loop
                currentIndex = (currentIndex + 1) % totalSlides;
                
                updateCarousel();
                
                setTimeout(() => {
                    isTransitioning = false;
                }, 400);
            }
            
            // Move to previous slide (infinite loop)
            function movePrev() {
                if (isTransitioning) return;
                isTransitioning = true;
                
                // Decrement with modulo for infinite loop
                currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
                
                updateCarousel();
                
                setTimeout(() => {
                    isTransitioning = false;
                }, 400);
            }
            
            // Event listeners
            nextButton.addEventListener('click', moveNext);
            prevButton.addEventListener('click', movePrev);
            
            // Initialize carousel - call immediately and after images load
            updateCarousel();
            
            // Also update after a short delay to ensure dimensions are correct
            setTimeout(() => {
                // Recalculate card widths to ensure they're correct
                const carouselWidth = carousel.offsetWidth || window.innerWidth;
                const newCardWidth = Math.min(carouselWidth * 0.75, 800);
                
                originalSlides.forEach((card) => {
                    card.style.width = newCardWidth + 'px';
                    card.style.marginLeft = (-newCardWidth / 2) + 'px';
                });
                
                updateCarousel();
            }, 100);
            
            // Update when images are loaded - recalculate widths
            originalSlides.forEach(card => {
                const img = card.querySelector('img');
                if (img) {
                    img.addEventListener('load', () => {
                        const carouselWidth = carousel.offsetWidth || window.innerWidth;
                        const newCardWidth = Math.min(carouselWidth * 0.75, 800);
                        card.style.width = newCardWidth + 'px';
                        card.style.marginLeft = (-newCardWidth / 2) + 'px';
                        updateCarousel();
                    });
                }
            });
            
            // Handle window resize - recalculate card widths
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    // Recalculate card widths on resize
                    const carouselWidth = carousel.offsetWidth || window.innerWidth;
                    const newCardWidth = Math.min(carouselWidth * 0.75, 800);
                    
                    originalSlides.forEach((card) => {
                        card.style.width = newCardWidth + 'px';
                        card.style.marginLeft = (-newCardWidth / 2) + 'px';
                    });
                    
                    updateCarousel();
                }, 250);
            });
        }
    </script>
</body>
</html>